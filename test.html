<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test</title>
    <style>
        canvas {
            /* background-color: #0099FF; */
            border: 1px solid blue;
        }
    </style>
</head>
<body>
    <canvas id="canvas" width="800" height="600">       
    </canvas>

    <script type="text/javascript">
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");

        class obj{
            x;
            y;
            img;
            width;
            height;
            

            constructor(img, x, y, width, height){
                this.img = new Image();
                this.img.src = img;
                this.width = width;
                this.height = height;
                this.x = x;
                this.y = y;
            }
        }

        class lifeObj extends obj{
            static aa = 0;
            vx; // velocity
            vy;

            constructor(img, width, height, x, y){
                super(img, width, height, x, y);
                this.vx = 0;
                this.vy = 0;
                lifeObj.aa++;
            }

            uqdateXY(){
                this.x += this.vx;
                this.y += this.vy;

                if(this.vx >= 5)  this.vx -= 5;
                else if(this.vx < -5)  this.vx += 5;
                else if(this.vx != 0) this.vx = 0;
                
                if(this.vy >= 5)  this.vy -= 5;
                else if(this.vy < -5)  this.vy += 5;
                else if(this.vy != 0) this.vy = 0; 
            }

            setVXY(vx, vy){
                this.vx += vx;
                this.vy += vy;
                
                if(-50 > this.vx) this.vx = -50;
                else if(this.vx > 50) this.vx = 50;
                
                if(-50 > this.vy) this.vy = -50;
                else if(this.vy > 50) this.vy = 50;
            }
        }

        
        const enemyType = [
            new lifeObj("image/fish_1.png", 60, 30),
            new lifeObj("image/fish_2.png", 80, 40),
            new lifeObj("image/fish_3.png", 110, 55),
            new lifeObj("image/fish_4.png", 200, 100),
            new lifeObj("image/fish_5.png", 350, 175),
            new lifeObj("image/fish_6.png", 700, 350)];
        
        var loopInstance = setInterval(update, 10);

        function update(){
            clearAll();
            // drawPlayer();
            var submarine = new lifeObj("image/player.png", 50, 50, 100, 100);
            submarine.setVXY(10000, 10000);

            var enemyTmp = enemyType[Math.floor(Math.random() * 3 + 0)];
            
            console.log(lifeObj.aa)
        }

        function clearAll(){
            canvas.width = canvas.width;
        }

        function drawPlayer(){
            submarine.uqdateXY();
            ctx.drawImage(submarine.img, submarine.x -(submarine.width / 2), submarine.y -(submarine.height / 2), submarine.width, submarine.height);
            console.log(submarine.vx +":"+ submarine.vy);
        }
    </script>

    
</body>
</html>